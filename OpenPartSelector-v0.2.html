<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¤– OpenPartSelector v0.2 - AIç”µå­å…ƒå™¨ä»¶é€‰å‹</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Microsoft YaHei', -apple-system, BlinkMacSystemFont, sans-serif; 
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #fff;
        }
        .container { max-width: 900px; margin: 0 auto; padding: 20px; }
        .header { text-align: center; padding: 40px 20px; }
        .logo { font-size: 60px; margin-bottom: 20px; }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; background: linear-gradient(90deg, #00d2ff, #3a7bd5); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .header p { color: #8892b0; font-size: 1.1em; }
        .card { background: rgba(255,255,255,0.05); border-radius: 20px; padding: 30px; margin: 20px 0; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); }
        .search-box { display: flex; gap: 10px; margin: 20px 0; }
        .search-box input { 
            flex: 1; padding: 18px 25px; font-size: 16px; 
            background: rgba(255,255,255,0.1); border: 2px solid rgba(255,255,255,0.2); 
            border-radius: 15px; color: #fff; outline: none; transition: all 0.3s;
        }
        .search-box input:focus { border-color: #00d2ff; background: rgba(255,255,255,0.15); }
        .search-box input::placeholder { color: rgba(255,255,255,0.5); }
        .search-box button { 
            padding: 18px 35px; font-size: 16px; font-weight: bold;
            background: linear-gradient(135deg, #00d2ff, #3a7bd5); 
            color: white; border: none; border-radius: 15px; cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .search-box button:hover { transform: translateY(-2px); box-shadow: 0 10px 30px rgba(0,210,255,0.3); }
        .examples { display: flex; flex-wrap: wrap; gap: 10px; margin: 15px 0; }
        .example-btn { 
            padding: 10px 20px; background: rgba(255,255,255,0.1); 
            border: 1px solid rgba(255,255,255,0.2); border-radius: 25px; 
            color: #fff; cursor: pointer; font-size: 14px; transition: all 0.2s;
        }
        .example-btn:hover { background: rgba(0,210,255,0.2); border-color: #00d2ff; }
        
        .features { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 30px 0; }
        .feature { text-align: center; padding: 25px; background: rgba(255,255,255,0.03); border-radius: 15px; border: 1px solid rgba(255,255,255,0.05); transition: transform 0.3s; }
        .feature:hover { transform: translateY(-5px); background: rgba(255,255,255,0.08); }
        .feature-icon { font-size: 45px; margin-bottom: 15px; }
        .feature h3 { margin-bottom: 10px; color: #00d2ff; }
        .feature p { color: #8892b0; font-size: 14px; line-height: 1.6; }
        
        .result { background: rgba(255,255,255,0.05); border-radius: 15px; padding: 25px; margin: 15px 0; border-left: 4px solid #00d2ff; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .result h3 { color: #00d2ff; margin-bottom: 10px; }
        .result p { color: #ccd6f6; margin: 5px 0; }
        .tags { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 15px; }
        .tag { padding: 6px 15px; background: rgba(0,210,255,0.2); border-radius: 20px; font-size: 13px; }
        .tag.price { background: rgba(40, 167, 69, 0.3); }
        .tag.warning { background: rgba(255, 193, 7, 0.3); }
        .tag.danger { background: rgba(220, 53, 69, 0.3); }
        .tag.success { background: rgba(40, 167, 69, 0.3); }
        
        .loading { text-align: center; padding: 40px; display: none; }
        .loading.show { display: block; }
        .spinner { width: 50px; height: 50px; border: 4px solid rgba(255,255,255,0.1); border-top-color: #00d2ff; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px; }
        @keyframes spin { to { transform: rotate(360deg); } }
        
        .bom-section { margin-top: 40px; }
        .bom-table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        .bom-table th, .bom-table td { padding: 15px; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .bom-table th { color: #00d2ff; font-weight: 600; }
        .bom-table tr:hover { background: rgba(255,255,255,0.05); }
        
        .stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin: 20px 0; }
        .stat { text-align: center; padding: 20px; background: rgba(255,255,255,0.05); border-radius: 15px; }
        .stat-value { font-size: 2em; font-weight: bold; color: #00d2ff; }
        .stat-label { color: #8892b0; font-size: 14px; margin-top: 5px; }
        
        .warning-box { background: rgba(255, 193, 7, 0.1); border: 1px solid rgba(255, 193, 7, 0.3); border-radius: 10px; padding: 20px; margin: 20px 0; }
        .warning-box h4 { color: #ffc107; margin-bottom: 10px; }
        .warning-box ul { margin-left: 20px; color: #ccd6f6; }
        
        .footer { text-align: center; padding: 40px; color: #8892b0; font-size: 14px; }
        .footer a { color: #00d2ff; text-decoration: none; }
        
        .tabs { display: flex; gap: 10px; margin-bottom: 20px; }
        .tab { padding: 12px 25px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; cursor: pointer; color: #8892b0; transition: all 0.2s; }
        .tab.active { background: rgba(0,210,255,0.2); border-color: #00d2ff; color: #fff; }
        .tab:hover:not(.active) { background: rgba(255,255,255,0.1); }
        
        @media (max-width: 768px) {
            .header h1 { font-size: 1.8em; }
            .search-box { flex-direction: column; }
            .stats { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">ğŸ¤–</div>
            <h1>OpenPartSelector v0.2</h1>
            <p>AIç”µå­å…ƒå™¨ä»¶æ™ºèƒ½é€‰å‹å¼•æ“ | å¼€æºå…è´¹ | ç«‹å³å¯ç”¨</p>
        </div>

        <div class="card">
            <div class="tabs">
                <div class="tab active" onclick="switchTab('select')">ğŸ” æ™ºèƒ½é€‰å‹</div>
                <div class="tab" onclick="switchTab('bom')">ğŸ“‹ BOMåˆ†æ</div>
                <div class="tab" onclick="switchTab('eol')">ğŸš¨ EOLé¢„è­¦</div>
                <div class="tab" onclick="switchTab('cad')">ğŸ”Œ CADåº“</div>
            </div>

            <!-- é€‰å‹é¢æ¿ -->
            <div id="panel-select">
                <h2>ğŸ” æ™ºèƒ½é€‰å‹</h2>
                <p style="color: #8892b0; margin: 10px 0;">è¾“å…¥é€‰å‹éœ€æ±‚ï¼ŒAIè‡ªåŠ¨æ¨èæœ€ä¼˜å™¨ä»¶</p>
                
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="ä¾‹å¦‚ï¼šæ‰¾ä¸€ä¸ª 3.3V LDO 1A">
                    <button onclick="search()">ğŸ” å¼€å§‹é€‰å‹</button>
                </div>
                
                <p style="color: #8892b0;">ğŸ’¡ çƒ­é—¨æœç´¢:</p>
                <div class="examples">
                    <button class="example-btn" onclick="setQuery('æ‰¾ä¸€ä¸ª 3.3V LDO 1A')">æ‰¾ä¸€ä¸ª 3.3V LDO 1A</button>
                    <button class="example-btn" onclick="setQuery('ESP32 WiFi æ¨¡å—')">ESP32 WiFi æ¨¡å—</button>
                    <button class="example-btn" onclick="setQuery('STM32 å•ç‰‡æœº å›½äº§æ›¿ä»£')">STM32 å›½äº§æ›¿ä»£</button>
                    <button class="example-btn" onclick="setQuery('USB è½¬ä¸²å£èŠ¯ç‰‡')">USB è½¬ä¸²å£</button>
                    <button class="example-btn" onclick="setQuery('åŒè¿æ”¾ ä½å™ªå£°')">åŒè¿æ”¾</button>
                </div>

                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>ğŸ¤– AI æ­£åœ¨åˆ†æé€‰å‹...</p>
                </div>

                <div id="results"></div>
            </div>

            <!-- BOMåˆ†æé¢æ¿ -->
            <div id="panel-bom" style="display:none;">
                <h2>ğŸ“‹ BOM åˆ†æ</h2>
                <p style="color: #8892b0; margin: 10px 0;">åˆ†æå™¨ä»¶æ¸…å•çš„é£é™©ã€æˆæœ¬å’Œä¾›åº”é“¾çŠ¶æ€</p>
                
                <div class="stats">
                    <div class="stat">
                        <div class="stat-value" id="bom-count">5</div>
                        <div class="stat-label">å™¨ä»¶ç§ç±»</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="bom-price">Â¥3.12</div>
                        <div class="stat-label">é¢„ä¼°æ€»ä»·</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="bom-risk" style="color: #ffc107;">1</div>
                        <div class="stat-label">é«˜é£é™©å™¨ä»¶</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="bom-save">Â¥0.84</div>
                        <div class="stat-label">é¢„ä¼°èŠ‚çœ</div>
                    </div>
                </div>

                <table class="bom-table">
                    <thead>
                        <tr>
                            <th>ä½å·</th>
                            <th>å‹å·</th>
                            <th>æ•°é‡</th>
                            <th>å•ä»·</th>
                            <th>çŠ¶æ€</th>
                            <th>é£é™©</th>
                        </tr>
                    </thead>
                    <tbody id="bom-body">
                        <tr><td colspan="6" style="text-align:center;color:#8892b0;">ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®åŠ è½½ç¤ºä¾‹BOM</td></tr>
                    </tbody>
                </table>

                <button class="example-btn" onclick="loadBOM()" style="width:100%;">ğŸ“¥ åŠ è½½ç¤ºä¾‹ BOM</button>
            </div>

            <!-- EOLé¢„è­¦é¢æ¿ -->
            <div id="panel-eol" style="display:none;">
                <h2>ğŸš¨ EOL åœäº§é¢„è­¦</h2>
                <p style="color: #8892b0; margin: 10px 0;">æ¯å¹´47ä¸‡+å™¨ä»¶åœäº§ï¼Œæå‰é¢„è­¦é£é™©</p>
                
                <div class="warning-box">
                    <h4>âš ï¸ é‡è¦é¢„è­¦</h4>
                    <ul>
                        <li><strong>STM32F103C8T6</strong> - NRND (ä¸æ¨èæ–°è®¾è®¡) - å»ºè®®: STM32G431CBU6</li>
                        <li><strong>ATMEGA328P</strong> - Active - å»ºè®®: AVR DD (æ›´ä½åŠŸè€—)</li>
                        <li><strong>ESP32-WROOM-32</strong> - Active - å¯è€ƒè™‘ ESP32-C3 (æ›´ä¾¿å®œ)</li>
                    </ul>
                </div>

                <h3 style="margin: 20px 0 10px;">ğŸ“Š å™¨ä»¶çŠ¶æ€è¯´æ˜</h3>
                <div class="tags">
                    <span class="tag success">âœ… Active - æ­£å¸¸ä¾›è´§</span>
                    <span class="tag warning">âš ï¸ NRND - ä¸æ¨èæ–°è®¾è®¡</span>
                    <span class="tag danger">ğŸ”´ LastTimeBuy - æœ€åè´­ä¹°æœŸ</span>
                    <span class="tag">âŒ Obsolete - å·²åœäº§</span>
                </div>
            </div>

            <!-- CADåº“é¢æ¿ -->
            <div id="panel-cad" style="display:none;">
                <h2>ğŸ”Œ CAD åº“ä¸‹è½½</h2>
                <p style="color: #8892b0; margin: 10px 0;">ä¸€é”®ä¸‹è½½ Symbol / Footprint / 3D Model</p>
                
                <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(200px,1fr)); gap:15px; margin:20px 0;">
                    <div class="feature" onclick="alert('å°†è·³è½¬åˆ° SamacSys ä¸‹è½½')">
                        <div class="feature-icon">ğŸ“¦</div>
                        <h3>SamacSys</h3>
                        <p>120ä¸‡+å™¨ä»¶<br>Altium/KiCad/Eagle</p>
                    </div>
                    <div class="feature" onclick="alert('å°†è·³è½¬åˆ° Ultra Librarian ä¸‹è½½')">
                        <div class="feature-icon">ğŸ“š</div>
                        <h3>Ultra Librarian</h3>
                        <p>300ä¸‡+å™¨ä»¶<br>æ‰€æœ‰ä¸»æµEDA</p>
                    </div>
                    <div class="feature" onclick="alert('å°†è·³è½¬åˆ° KiCad å®˜ç½‘')">
                        <div class="feature-icon">âš¡</div>
                        <h3>KiCad å®˜æ–¹åº“</h3>
                        <p>æŒç»­æ›´æ–°<br>å®Œå…¨å…è´¹</p>
                    </div>
                </div>

                <h3 style="margin: 20px 0 10px;">ğŸ“‹ å¸¸è§å™¨ä»¶çŠ¶æ€</h3>
                <table class="bom-table">
                    <thead>
                        <tr><th>å‹å·</th><th>Symbol</th><th>Footprint</th><th>3D Model</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>STM32F103C8T6</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr>
                        <tr><td>ESP32-WROOM</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr>
                        <tr><td>CH340G</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr>
                        <tr><td>LM358</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="card">
            <h2>âœ¨ æ ¸å¿ƒåŠŸèƒ½</h2>
            <div class="features">
                <div class="feature">
                    <div class="feature-icon">ğŸ¤–</div>
                    <h3>AI æ™ºèƒ½é€‰å‹</h3>
                    <p>è‡ªç„¶è¯­è¨€è¾“å…¥<br>å¤šå¹³å°æ¯”ä»·<br>ç§’çº§æ¨è</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">ğŸ‡¨ğŸ‡³</div>
                    <h3>å›½äº§æ›¿ä»£</h3>
                    <p>STM32â†’GD32<br>é™æœ¬30%<br>pin2pinå…¼å®¹</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">ğŸš¨</div>
                    <h3>EOL é¢„è­¦</h3>
                    <p>47ä¸‡+/å¹´åœäº§<br>æå‰é¢„è­¦<br>æ›¿ä»£æ–¹æ¡ˆ</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">ğŸ”Œ</div>
                    <h3>CAD åº“</h3>
                    <p>SamacSysé›†æˆ<br>ä¸€é”®ä¸‹è½½<br>ç¬¦å·/å°è£…/3D</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">ğŸ“‹</div>
                    <h3>BOM åˆ†æ</h3>
                    <p>ä¾›åº”é“¾é£é™©<br>æˆæœ¬ä¼˜åŒ–<br>å®Œæ•´æŠ¥å‘Š</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">ğŸ­</div>
                    <h3>ç«‹åˆ›ç”Ÿæ€</h3>
                    <p>ç«‹åˆ›å•†åŸ<br>SMTæŠ¥ä»·<br>ä¸€ç«™å¼é‡‡è´­</p>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>ğŸ¤– <strong>OpenPartSelector v0.2</strong> | å¼€æºå…è´¹ | MIT License</p>
            <p style="margin-top:10px;">
                ğŸ“¦ <a href="https://github.com/KINGSTON-115/OpenPartSelector" target="_blank">GitHub</a> | 
                ğŸ“§ <a href="mailto:zhenweisi@openclaw.ai">åé¦ˆ</a> |
                ğŸ“„ <a href="#" onclick="alert('ç‰ˆæœ¬: 0.2.0\n\næ ¸å¿ƒæ¨¡å—:\n- Agent: AIé€‰å‹\n- BOM: å®Œæ•´åˆ†æ\n- EOL: åœäº§é¢„è­¦\n- CAD: åº“é›†æˆ')">å…³äº</a>
            </p>
        </div>
    </div>

    <script>
        // å†…ç½®æ•°æ®åº“
        const database = {
            'æ‰¾ä¸€ä¸ª 3.3v ldo': [
                { part: 'LD1117V33', mfr: 'STMicroelectronics', desc: 'LDO Voltage Regulator 3.3V 1A', price: 0.15, stock: 365000, score: 100, voltage: '3.3V', current: '1A', package: 'SOT-223' },
                { part: 'AMS1117-3.3', mfr: 'Advanced Monolithic', desc: 'LDOç¨³å‹å™¨ 3.3V 1A SOT-223', price: 0.08, stock: 750000, score: 100, voltage: '3.3V', current: '1A', package: 'SOT-223' },
                { part: 'ME6211C33', mfr: 'Midsummer', desc: 'LDO 3.3V 500mA SOT-23-5', price: 0.04, stock: 1500000, score: 90, voltage: '3.3V', current: '500mA', package: 'SOT-23-5' }
            ],
            'stm32 å•ç‰‡æœº': [
                { part: 'STM32F103C8T6', mfr: 'STMicroelectronics', desc: 'ARM Cortex-M3 64KB Flash 20KB RAM', price: 0.95, stock: 15000, score: 85, voltage: '3.3V', package: 'LQFP-48' },
                { part: 'GD32F103C8T6', mfr: 'å…†æ˜“åˆ›æ–°', desc: 'å›½äº§æ›¿ä»£ 100%å…¼å®¹', price: 0.85, stock: 30000, score: 90, voltage: '3.3V', package: 'LQFP-48', alt: 'âœ… GD32å›½äº§æ›¿ä»£ï¼Œä¾¿å®œ10%' }
            ],
            'esp32 wifi æ¨¡å—': [
                { part: 'ESP32-WROOM-32', mfr: 'ä¹é‘«', desc: 'WiFi+BT Module 4MB Flash', price: 1.85, stock: 290000, score: 95, voltage: '3.3V', package: 'Module' },
                { part: 'ESP32-C3FH4', mfr: 'ä¹é‘«', desc: 'RISC-Vå†…æ ¸ æ›´çœç”µ', price: 0.95, stock: 85000, score: 85, voltage: '3.3V', package: 'QFN-32' }
            ],
            'usb è½¬ä¸²å£': [
                { part: 'CH340G', mfr: 'æ²æ’', desc: 'USB to UART Converter', price: 0.18, stock: 52000, score: 95, voltage: '5V/3.3V', package: 'SOP-16' },
                { part: 'CP2102N', mfr: 'Silicon Labs', desc: 'USB to UART Bridge', price: 1.45, stock: 12000, score: 80, voltage: '3.3V', package: 'QFN-24' }
            ],
            'åŒè¿æ”¾': [
                { part: 'LM358', mfr: 'TI', desc: 'Dual Op-Amp Low Power', price: 0.06, stock: 200000, score: 95, voltage: '3-32V', package: 'SOP-8' },
                { part: 'TL072', mfr: 'TI', desc: 'Dual Low-Noise JFET Op-Amp', price: 0.08, stock: 80000, score: 90, voltage: 'Â±6~18V', package: 'SOP-8' },
                { part: 'NE5532', mfr: 'TI', desc: 'Low Noise Dual Op-Amp', price: 0.25, stock: 30000, score: 85, voltage: 'Â±5~22V', package: 'SOP-8' }
            ],
            'stm32 å›½äº§æ›¿ä»£': [
                { part: 'GD32F103C8T6', mfr: 'å…†æ˜“åˆ›æ–°', desc: 'å›½äº§æ›¿ä»£ 100%å…¼å®¹', price: 0.85, stock: 30000, score: 95, voltage: '3.3V', package: 'LQFP-48', alt: 'âœ… ä»·æ ¼ä¾¿å®œ10%ï¼Œæ€§èƒ½æ›´å¼º' },
                { part: 'HK32F103C8T6', mfr: 'èˆªé¡ºå¾®', desc: 'å›½äº§æ›¿ä»£ 95%å…¼å®¹', price: 0.80, stock: 18000, score: 85, voltage: '3.3V', package: 'LQFP-48', alt: 'âš ï¸ ADCç²¾åº¦ç•¥æœ‰å·®å¼‚' }
            ]
        };

        // ç¤ºä¾‹ BOM
        const exampleBOM = [
            { ref: 'U1', part: 'STM32F103C8T6', qty: 1, price: 0.95, status: 'NRND', risk: 'medium', cad: 'âœ…' },
            { ref: 'U2', part: 'CH340C', qty: 1, price: 0.18, status: 'Active', risk: 'low', cad: 'âœ…' },
            { ref: 'U3', part: 'AMS1117-3.3', qty: 1, price: 0.08, status: 'Active', risk: 'low', cad: 'âœ…' },
            { ref: 'U4', part: 'ESP32-WROOM-32', qty: 1, price: 1.85, status: 'Active', risk: 'low', cad: 'âœ…' },
            { ref: 'U5', part: 'LM358', qty: 1, price: 0.06, status: 'Active', risk: 'low', cad: 'âœ…' }
        ];

        function setQuery(text) {
            document.getElementById('searchInput').value = text;
            search();
        }

        function switchTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            ['select', 'bom', 'eol', 'cad'].forEach(p => {
                document.getElementById('panel-' + p).style.display = p === tab ? 'block' : 'none';
            });
        }

        function search() {
            const query = document.getElementById('searchInput').value.trim().toLowerCase();
            if (!query) return alert('è¯·è¾“å…¥æœç´¢å†…å®¹');
            
            const loading = document.getElementById('loading');
            const results = document.getElementById('results');
            
            loading.classList.add('show');
            results.innerHTML = '';
            
            // æ¨¡æ‹Ÿæœç´¢å»¶è¿Ÿ
            setTimeout(() => {
                let matched = null;
                
                // å…³é”®è¯åŒ¹é…
                for (const key in database) {
                    if (query.includes(key) || key.includes(query) || 
                        query.includes(key.replace(/æ‰¾ä¸€ä¸ª|å•ç‰‡æœº|æ¨¡å—/g,'').trim())) {
                        matched = database[key];
                        break;
                    }
                }
                
                // é»˜è®¤è¿”å›LDOç»“æœ
                if (!matched) {
                    matched = database['æ‰¾ä¸€ä¸ª 3.3v ldo'];
                }
                
                let html = `<h3 style="margin:20px 0 10px;">ğŸ“¦ æ¨èç»“æœ (${matched.length} ä¸ª)</h3>`;
                
                matched.forEach((r, i) => {
                    const statusClass = r.score >= 95 ? 'success' : r.score >= 80 ? 'warning' : '';
                    html += `
                        <div class="result">
                            <h3>${i+1}. ğŸ“¦ ${r.part}</h3>
                            <p>${r.mfr} | ${r.desc}</p>
                            <div class="tags">
                                <span class="tag price">ğŸ’° Â¥${r.price.toFixed(2)}</span>
                                <span class="tag">ğŸ“¦ ${r.stock.toLocaleString()}ä»¶</span>
                                <span class="tag ${statusClass}">ğŸ¯ åŒ¹é…åº¦ ${r.score}%</span>
                                <span class="tag">âš¡ ${r.voltage}</span>
                                <span class="tag">ğŸ”Œ ${r.package}</span>
                                ${r.alt ? `<span class="tag warning">${r.alt}</span>` : ''}
                            </div>
                        </div>
                    `;
                });
                
                results.innerHTML = html;
                loading.classList.remove('show');
                
                // åˆ‡æ¢åˆ°é€‰å‹é¢æ¿
                switchTab('select');
                document.querySelector('.tab').click();
            }, 800);
        }

        function loadBOM() {
            const tbody = document.getElementById('bom-body');
            let total = 0, riskCount = 0, save = 0;
            
            tbody.innerHTML = exampleBOM.map(item => {
                total += item.price * item.qty;
                if (item.risk === 'medium') riskCount++;
                save += item.price * item.qty * 0.3;
                
                const riskClass = item.risk === 'medium' ? 'warning' : 'success';
                const statusIcon = item.status === 'NRND' ? 'âš ï¸ NRND' : 'âœ… Active';
                
                return `<tr>
                    <td>${item.ref}</td>
                    <td>${item.part}</td>
                    <td>${item.qty}</td>
                    <td>Â¥${item.price.toFixed(2)}</td>
                    <td><span class="tag ${riskClass}">${statusIcon}</span></td>
                    <td><span class="tag ${riskClass}">${item.risk.toUpperCase()}</span></td>
                </tr>`;
            }).join('');
            
            document.getElementById('bom-count').textContent = exampleBOM.length;
            document.getElementById('bom-price').textContent = 'Â¥' + total.toFixed(2);
            document.getElementById('bom-risk').textContent = riskCount;
            document.getElementById('bom-save').textContent = 'Â¥' + save.toFixed(2);
        }

        // å›è½¦æœç´¢
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') search();
        });

        // åˆå§‹åŠ è½½ç¤ºä¾‹BOM
        setTimeout(loadBOM, 500);
    </script>
</body>
</html>
