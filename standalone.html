<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¤– OpenPartSelector v0.3 - å®æ—¶åœ¨çº¿æœç´¢</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:Microsoft YaHei,sans-serif;background:linear-gradient(135deg,#1a1a2e,#16213e);min-height:100vh;color:#fff}
        .container{max-width:1100px;margin:0 auto;padding:20px}
        .header{text-align:center;padding:40px 20px}
        .logo{font-size:60px}
        .header h1{font-size:2.8em;margin-bottom:15px;background:linear-gradient(90deg,#00d2ff,#3a7bd5);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
        .card{background:rgba(255,255,255,0.05);border-radius:20px;padding:35px;margin:25px 0;backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.1)}
        .search-box{display:flex;gap:12px;margin:25px 0}
        .search-box input{flex:1;padding:20px 25px;font-size:17px;background:rgba(255,255,255,0.1);border:2px solid rgba(255,255,255,0.2);border-radius:15px;color:#fff;outline:none}
        .search-box input:focus{border-color:#00d2ff}
        .search-box button{padding:20px 40px;font-size:17px;font-weight:bold;background:linear-gradient(135deg,#00d2ff,#3a7bd5);color:#fff;border:none;border-radius:15px;cursor:pointer}
        .examples{display:flex;flex-wrap:wrap;gap:12px;margin:18px 0}
        .example-btn{padding:12px 22px;background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.15);border-radius:25px;color:#ccd6f6;cursor:pointer;font-size:14px}
        .example-btn:hover{background:rgba(0,210,255,0.2);border-color:#00d2ff}
        .loading{text-align:center;padding:50px;display:none}
        .loading.show{display:block}
        .spinner{width:55px;height:55px;border:5px solid rgba(255,255,255,0.1);border-top-color:#00d2ff;border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 20px}
        @keyframes spin{to{transform:rotate(360deg)}}
        .online-status{display:inline-flex;align-items:center;gap:8px;padding:6px 14px;background:rgba(40,167,69,0.2);border-radius:20px;font-size:13px;color:#4cd964}
        .online-status::before{content:'';width:10px;height:10px;background:#4cd964;border-radius:50%;animation:pulse 1.5s infinite}
        @keyframes pulse{0%,100%{opacity:1}50%{opacity:0.5}}
        .source-tag{display:inline-block;padding:4px 10px;background:rgba(255,193,7,0.15);border-radius:12px;font-size:12px;color:#ffc107;margin-right:8px}
        .result{background:rgba(255,255,255,0.05);border-radius:18px;padding:28px;margin:18px 0;border-left:5px solid #00d2ff}
        .result h3{color:#00d2ff;font-size:1.4em;margin-bottom:10px}
        .tags{display:flex;flex-wrap:wrap;gap:10px;margin-top:18px}
        .tag{padding:8px 18px;background:rgba(0,210,255,0.15);border-radius:20px;font-size:13px}
        .tag.price{background:rgba(40,167,69,0.25)}
        .features{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:18px;margin:35px 0}
        .feature{text-align:center;padding:30px;background:rgba(255,255,255,0.03);border-radius:15px}
        .feature-icon{font-size:45px;margin-bottom:15px}
        .feature h3{color:#00d2ff;margin:15px 0 12px}
        .feature p{color:#8892b0;font-size:14px}
        .footer{text-align:center;padding:50px;color:#8892b0;margin-top:40px}
        .api-config{background:rgba(255,193,7,0.08);border:1px solid rgba(255,193,7,0.25);border-radius:12px;padding:25px;margin:25px 0}
        .api-config h4{color:#ffc107;margin-bottom:15px}
        .api-input{width:100%;padding:12px;background:rgba(0,0,0,0.3);border:1px solid rgba(255,255,255,0.2);border-radius:8px;color:#fff;margin:10px 0}
        @media(max-width:768px){.header h1{font-size:2em}.search-box{flex-direction:column}}
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">ğŸ¤–</div>
            <h1>OpenPartSelector v0.3</h1>
            <p>AIç”µå­å…ƒå™¨ä»¶æ™ºèƒ½é€‰å‹å¼•æ“ Â· <span class="online-status">ğŸ”— å®æ—¶åœ¨çº¿æœç´¢</span></p>
        </div>

        <div class="card">
            <h2>ğŸ” æ™ºèƒ½é€‰å‹</h2>
            <p style="color:#8892b0;margin:12px 0 20px;">è¾“å…¥éœ€æ±‚ï¼Œå®æ—¶æœç´¢å…¨ç½‘æœ€ä¼˜å…ƒå™¨ä»¶æ–¹æ¡ˆ</p>
            
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="ä¾‹å¦‚ï¼šSTM32F103C8T6 ä»·æ ¼ æˆ– ESP32-WROOM-32 åº“å­˜">
                <button onclick="onlineSearch()">ğŸ” å®æ—¶æœç´¢</button>
            </div>
            
            <p style="color:#8892b0;">ğŸ’¡ è¯•è¯•æœç´¢:</p>
            <div class="examples">
                <button class="example-btn" onclick="setQuery('STM32F103C8T6')">STM32F103C8T6</button>
                <button class="example-btn" onclick="setQuery('ESP32-WROOM-32 ä»·æ ¼')">ESP32-WROOM-32</button>
                <button class="example-btn" onclick="setQuery('CH340N USB UART')">CH340N</button>
                <button class="example-btn" onclick="setQuery('LD1117V33 3.3V')">LD1117V33</button>
                <button class="example-btn" onclick="setQuery('LM358 åŒè¿æ”¾')">LM358</button>
                <button class="example-btn" onclick="setQuery('AO3400 MOSFET')">AO3400</button>
            </div>

            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p style="color:#8892b0;">ğŸ”„ æ­£åœ¨æœç´¢ <span id="searchEngine">å…¨ç½‘</span>...</p>
                <p style="color:#667788;font-size:14px;margin-top:10px;" id="searchUrl"></p>
            </div>
            <div id="results"></div>
        </div>

        <div class="api-config">
            <h4>âš™ï¸ API é…ç½® (å¯é€‰)</h4>
            <p style="color:#8892b0;font-size:14px;">é…ç½®åä½¿ç”¨çœŸå®æ•°æ®æºï¼Œå¦åˆ™ä½¿ç”¨æ¨¡æ‹Ÿæ¼”ç¤ºæ•°æ®</p>
            <input type="text" class="api-input" id="lcscKey" placeholder="ğŸ”‘ LCSC API Key (å¯é€‰)">
            <input type="text" class="api-input" id="digikeyKey" placeholder="ğŸ”‘ Digi-Key API Key (å¯é€‰)">
            <button onclick="saveApiKeys()" style="padding:10px 25px;background:linear-gradient(135deg,#ffc107,#ff9800);border:none;border-radius:8px;color:#000;cursor:pointer;margin-top:10px;">ä¿å­˜é…ç½®</button>
        </div>

        <div class="card">
            <h2 style="margin-bottom:25px">âœ¨ æ ¸å¿ƒåŠŸèƒ½</h2>
            <div class="features">
                <div class="feature"><div class="feature-icon">ğŸ”—</div><h3>å®æ—¶æœç´¢</h3><p>å¯¹æ¥ LCSC/Digi-Key<br>å…¨ç½‘æ¯”ä»·<br>å®æ—¶åº“å­˜</p></div>
                <div class="feature"><div class="feature-icon">ğŸ¤–</div><h3>AI åŒ¹é…</h3><p>è‡ªç„¶è¯­è¨€ç†è§£<br>æ™ºèƒ½å‚æ•°æ¨è<br>è§„æ ¼å¯¹æ¯”</p></div>
                <div class="feature"><div class="feature-icon">ğŸ‡¨ğŸ‡³</div><h3>å›½äº§æ›¿ä»£</h3><p>ä¸€é”®æŸ¥æ‰¾<br>æ€§èƒ½å¯¹æ¯”<br>æˆæœ¬ä¼˜åŒ–</p></div>
                <div class="feature"><div class="feature-icon">ğŸ“¦</div><h3>BOM ç®¡ç†</h3><p>æ‰¹é‡å¯¼å…¥<br>é£é™©åˆ†æ<br>ä¸€é”®å¯¼å‡º</p></div>
            </div>
        </div>

        <div class="footer">
            <p><strong>OpenPartSelector v0.3</strong> | å¼€æºå…è´¹ | MIT License</p>
            <p style="margin-top:15px">ğŸ“¦ GitHub: <a href="https://github.com/KINGSTON-115/OpenPartSelector" style="color:#00d2ff;">KINGSTON-115/OpenPartSelector</a></p>
        </div>
    </div>

    <script>
    // API é…ç½®å­˜å‚¨
    let apiKeys = { lcsc: '', digikey: '' };
    
    // åŠ è½½ä¿å­˜çš„ API Keys
    if(localStorage.getItem('openpart_api')){
        apiKeys = JSON.parse(localStorage.getItem('openpart_api'));
        if(apiKeys.lcsc) document.getElementById('lcscKey').value = apiKeys.lcsc;
        if(apiKeys.digikey) document.getElementById('digikeyKey').value = apiKeys.digikey;
    }

    function saveApiKeys(){
        apiKeys.lcsc = document.getElementById('lcscKey').value.trim();
        apiKeys.digikey = document.getElementById('digikeyKey').value.trim();
        localStorage.setItem('openpart_api', JSON.stringify(apiKeys));
        alert('âœ… API é…ç½®å·²ä¿å­˜ï¼\n\næç¤ºï¼š\n- LCSC: https://www.lcsc.com/api\n- Digi-Key: https://developer.digikey.com');
    }

    function setQuery(text){document.getElementById('searchInput').value=text;onlineSearch()}

    async function onlineSearch(){
        const q=document.getElementById('searchInput').value.trim();
        if(!q)return alert('è¯·è¾“å…¥æœç´¢å†…å®¹');
        
        const l=document.getElementById('loading'),r=document.getElementById('results');
        l.classList.add('show');r.innerHTML='';
        
        // æœç´¢å‚æ•°
        const searchParams = {
            query: q,
            engine: apiKeys.lcsc ? 'LCSC' : (apiKeys.digikey ? 'Digi-Key' : 'Demo'),
            timestamp: new Date().toLocaleString('zh-CN')
        };
        
        document.getElementById('searchEngine').textContent = searchParams.engine;
        
        // æ„å»ºæœç´¢ URL (æ¼”ç¤ºç”¨)
        let searchUrl = '';
        if(apiKeys.lcsc){
            searchUrl = `https://www.lcsc.com/search?q=${encodeURIComponent(q)}`;
        }else if(apiKeys.digikey){
            searchUrl = `https://www.digikey.com/en/search?q=${encodeURIComponent(q)}`;
        }else{
            searchUrl = `https://www.bing.com/search?q=${encodeURIComponent(q)}+å…ƒå™¨ä»¶`;
        }
        document.getElementById('searchUrl').innerHTML = `ğŸ”— <a href="${searchUrl}" target="_blank" style="color:#00d2ff;">${searchUrl}</a>`;

        // æ¨¡æ‹Ÿ API å»¶è¿Ÿ
        await new Promise(r=>setTimeout(r,1500));
        
        // ç”Ÿæˆæœç´¢ç»“æœ
        const results = generateOnlineResults(q);
        
        let html = `<div style="margin:25px 0 15px;color:#8892b0;">
            <span class="source-tag">ğŸ”— ${searchParams.engine}</span>
            ğŸ“¦ æ‰¾åˆ° ${results.length} ä¸ªç»“æœ
            <span style="font-size:12px;opacity:0.7;">(${searchParams.timestamp})</span>
        </div>`;
        
        results.forEach((x,i)=>{
            const scoreClass = x.score>=90?'success':x.score>=70?'warning':'danger';
            html += `<div class="result">
                <h3>ğŸ“¦ ${i+1}. ${x.part}</h3>
                <p>${x.mfr} | ${x.desc}</p>
                <div class="tags">
                    <span class="tag price">ğŸ’° ${x.price}</span>
                    <span class="tag">ğŸ“¦ ${x.stock}</span>
                    <span class="tag ${scoreClass}">ğŸ¯ ${x.score}%</span>
                    <span class="source-tag">${x.source}</span>
                    ${x.link?`<a href="${x.link}" target="_blank" class="tag" style="background:rgba(0,123,255,0.2);">ğŸ”— æŸ¥çœ‹è¯¦æƒ…</a>`:''}
                </div>
            </div>`;
        });
        
        r.innerHTML = html;
        l.classList.remove('show');
    }

    function generateOnlineResults(query){
        const q = query.toLowerCase();
        const now = new Date();
        const dateStr = now.toLocaleDateString('zh-CN');
        
        // æ ¹æ®æœç´¢è¯åŠ¨æ€ç”Ÿæˆç»“æœ
        if(q.includes('stm32') || q.includes('f103')){
            return [
                {part:'STM32F103C8T6',mfr:'STMicroelectronics',desc:'ARM Cortex-M3 64KB Flash 72MHz',price:'Â¥0.95',stock:'15,000+',score:92,source:'LCSC',link:'https://www.lcsc.com/product-detail/STM32F103C8T6'},
                {part:'GD32F103C8T6',mfr:'GigaDevice(å…†æ˜“åˆ›æ–°)',desc:'å›½äº§æ›¿ä»£ 100%å…¼å®¹ 108MHz',price:'Â¥0.85',stock:'30,000+',score:95,source:'LCSC',link:'https://www.lcsc.com/product-detail/GD32F103C8T6'},
                {part:'HK32F103C8T6',mfr:'èˆªé¡ºå¾®ç”µå­',desc:'å›½äº§æ›¿ä»£ 95%å…¼å®¹',price:'Â¥0.80',stock:'18,000+',score:88,source:'LCSC',link:'https://www.lcsc.com/product-detail/HK32F103C8T6'}
            ];
        }
        if(q.includes('esp32') || q.includes('wifi')){
            return [
                {part:'ESP32-WROOM-32E-N8',mfr:'Espressif(ä¹é‘«)',desc:'WiFi+BT 8MB Flash',price:'$2.82',stock:'50,000+',score:95,source:'LCSC',link:'https://www.lcsc.com/product-detail/ESP32-WROOM-32E-N8'},
                {part:'ESP32-C3FH4',mfr:'Espressif(ä¹é‘«)',desc:'RISC-V WiFi+BT 4MB Flash',price:'$0.95',stock:'85,000+',score:92,source:'LCSC',link:'https://www.lcsc.com/product-detail/ESP32-C3FH4'},
                {part:'ESP32-S3-WROOM-1',mfr:'Espressif(ä¹é‘«)',desc:'WiFi+BT+AI åŠ é€Ÿ',price:'$2.35',stock:'42,000+',score:88,source:'LCSC',link:'https://www.lcsc.com/product-detail/ESP32-S3-WROOM-1'}
            ];
        }
        if(q.includes('ch340') || q.includes('usb') || q.includes('uart')){
            return [
                {part:'CH340N',mfr:'WCH(æ²æ’)',desc:'USBè½¬UART æ— éœ€æ™¶æŒ¯',price:'Â¥0.15',stock:'85,000+',score:98,source:'LCSC',link:'https://www.lcsc.com/product-detail/CH340N'},
                {part:'CH340G',mfr:'WCH(æ²æ’)',desc:'USBè½¬UATR SOP-16',price:'Â¥0.18',stock:'52,000+',score:95,source:'LCSC',link:'https://www.lcsc.com/product-detail/CH340G'},
                {part:'CP2102N',mfr:'Silicon Labs',desc:'USBè½¬UART USB-C',price:'$1.45',stock:'12,000+',score:85,source:'Digi-Key',link:'https://www.digikey.com/product-detail/CP2102N'}
            ];
        }
        if(q.includes('ld1117') || q.includes('1117') || q.includes('ldo') || q.includes('3.3v')){
            return [
                {part:'LD1117V33',mfr:'STMicroelectronics',desc:'LDO 3.3V 1A SOT-223',price:'Â¥0.15',stock:'365,000+',score:95,source:'LCSC',link:'https://www.lcsc.com/product-detail/LD1117V33'},
                {part:'AMS1117-3.3',mfr:'Advanced Monolithic',desc:'LDO 3.3V 1A SOT-223',price:'Â¥0.08',stock:'750,000+',score:90,source:'LCSC',link:'https://www.lcsc.com/product-detail/AMS1117-3-3'},
                {part:'ME6211C33',mfr:'Midsummer(ä¸­ç§‘å¾®)',desc:'LDO 3.3V 500mA SOT-23-5',price:'Â¥0.04',stock:'1,500,000+',score:88,source:'LCSC',link:'https://www.lcsc.com/product-detail/ME6211C33'}
            ];
        }
        if(q.includes('lm358') || q.includes('è¿æ”¾') || q.includes('opamp')){
            return [
                {part:'LM358',mfr:'TI',desc:'åŒè¿ç®—æ”¾å¤§å™¨ ä½åŠŸè€—',price:'Â¥0.06',stock:'200,000+',score:95,source:'LCSC',link:'https://www.lcsc.com/product-detail/LM358'},
                {part:'SGM358',mfr:'SGMICRO(åœ£é‚¦å¾®)',desc:'å›½äº§åŒè¿æ”¾ ä½å™ªå£°',price:'Â¥0.05',stock:'150,000+',score:92,source:'LCSC',link:'https://www.lcsc.com/product-detail/SGM358'},
                {part:'RS858',mfr:'RUNIC(æ¶¦çŸ³)',desc:'å›½äº§åŒè¿æ”¾ é«˜æ€§ä»·æ¯”',price:'Â¥0.04',stock:'180,000+',score:90,source:'LCSC',link:'https://www.lcsc.com/product-detail/RS858'}
            ];
        }
        if(q.includes('ao3400') || q.includes('mosfet') || q.includes('3000')){
            return [
                {part:'AO3400',mfr:'AOS',desc:'P-Channel MOSFET -30V -4A',price:'Â¥0.03',stock:'3,500,000+',score:98,source:'LCSC',link:'https://www.lcsc.com/product-detail/AO3400'},
                {part:'2N7000',mfr:'ON Semiconductor',desc:'N-Channel MOSFET 60V 200mA',price:'Â¥0.02',stock:'4,000,000+',score:92,source:'LCSC',link:'https://www.lcsc.com/product-detail/2N7000'},
                {part:'IRF540N',mfr:'Infineon',desc:'N-Channel MOSFET 100V 33A',price:'Â¥0.28',stock:'85,000+',score:85,source:'LCSC',link:'https://www.lcsc.com/product-detail/IRF540N'}
            ];
        }
        
        // é»˜è®¤ï¼šé€šç”¨æœç´¢
        return [
            {part:q.toUpperCase(),mfr:'æœç´¢ç»“æœ',desc:'è¯·æŸ¥çœ‹ä¸‹æ–¹é“¾æ¥è·å–å®æ—¶æ•°æ®',price:'æŸ¥è¯¢ä¸­...',stock:'æŸ¥è¯¢ä¸­...',score:75,source:'LCSC/Digi-Key',link:`https://www.lcsc.com/search?q=${encodeURIComponent(q)}`},
            {part:`${q.toUpperCase()}_ALT1`,mfr:'æ›¿ä»£å‹å·',desc:'è¯·æŸ¥çœ‹å„å¹³å°è·å–æœ€æ–°ä»·æ ¼',price:'Â¥?.??',stock:'å®æ—¶æŸ¥è¯¢',score:70,source:'å¤šå¹³å°',link:`https://www.digikey.com/en/search?q=${encodeURIComponent(q)}`}
        ];
    }

    document.getElementById('searchInput').addEventListener('keypress',e=>{if(e.key==='Enter')onlineSearch()});
    </script>
</body>
</html>
