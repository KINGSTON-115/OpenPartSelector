<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¤– OpenPartSelector v0.4 - å®æ—¶æ•°æ®</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:Microsoft YaHei,sans-serif;background:linear-gradient(135deg,#1a1a2e,#16213e);min-height:100vh;color:#fff}
        .container{max-width:1100px;margin:0 auto;padding:20px}
        .header{text-align:center;padding:40px 20px}
        .logo{font-size:60px}
        .header h1{font-size:2.8em;margin-bottom:15px;background:linear-gradient(90deg,#00d2ff,#3a7bd5);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
        .card{background:rgba(255,255,255,0.05);border-radius:20px;padding:35px;margin:25px 0;backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.1)}
        .search-box{display:flex;gap:12px;margin:25px 0}
        .search-box input{flex:1;padding:20px 25px;font-size:17px;background:rgba(255,255,255,0.1);border:2px solid rgba(255,255,255,0.2);border-radius:15px;color:#fff;outline:none}
        .search-box input:focus{border-color:#00d2ff}
        .search-box button{padding:20px 40px;font-size:17px;font-weight:bold;background:linear-gradient(135deg,#00d2ff,#3a7bd5);color:#fff;border:none;border-radius:15px;cursor:pointer}
        .search-box button:hover{transform:translateY(-2px)}
        .examples{display:flex;flex-wrap:wrap;gap:12px;margin:18px 0}
        .example-btn{padding:12px 22px;background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.15);border-radius:25px;color:#ccd6f6;cursor:pointer;font-size:14px}
        .example-btn:hover{background:rgba(0,210,255,0.2);border-color:#00d2ff}
        .loading{text-align:center;padding:50px;display:none}
        .loading.show{display:block}
        .spinner{width:55px;height:55px;border:5px solid rgba(255,255,255,0.1);border-top-color:#00d2ff;border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 20px}
        @keyframes spin{to{transform:rotate(360deg)}}
        .data-status{text-align:center;margin:15px 0;padding:15px;background:rgba(40,167,69,0.1);border-radius:12px;border:1px solid rgba(40,167,69,0.3)}
        .data-status.online{background:rgba(40,167,69,0.15);border-color:#28a745}
        .data-status.offline{background:rgba(220,53,69,0.15);border-color:#dc3545}
        .result{background:rgba(255,255,255,0.05);border-radius:18px;padding:28px;margin:18px 0;border-left:5px solid #00d2ff}
        .result h3{color:#00d2ff;font-size:1.4em;margin-bottom:10px}
        .tags{display:flex;flex-wrap:wrap;gap:10px;margin-top:18px}
        .tag{padding:8px 18px;background:rgba(0,210,255,0.15);border-radius:20px;font-size:13px}
        .tag.price{background:rgba(40,167,69,0.25)}
        .tag.success{background:rgba(40,167,69,0.25)}
        .tag.warning{background:rgba(255,193,7,0.2);color:#ffc107}
        .features{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:18px;margin:35px 0}
        .feature{text-align:center;padding:30px;background:rgba(255,255,255,0.03);border-radius:15px}
        .feature-icon{font-size:45px;margin-bottom:15px}
        .feature h3{color:#00d2ff;margin:15px 0 12px}
        .feature p{color:#8892b0;font-size:14px}
        .footer{text-align:center;padding:50px;color:#8892b0;margin-top:40px}
        .raw-link{display:inline-block;padding:8px 16px;background:rgba(255,193,7,0.15);border-radius:8px;font-size:13px;color:#ffc107;margin-top:10px}
        @media(max-width:768px){.header h1{font-size:2em}.search-box{flex-direction:column}}
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">ğŸ¤–</div>
            <h1>OpenPartSelector v0.4</h1>
            <p>ğŸ¤– AIç”µå­å…ƒå™¨ä»¶é€‰å‹ Â· ğŸ”— <span id="dataSource">æ­£åœ¨åŠ è½½...</span></p>
        </div>

        <div class="card">
            <h2>ğŸ” æ™ºèƒ½é€‰å‹</h2>
            <p style="color:#8892b0;margin:12px 0 20px;">åŸºäº GitHub Actions è‡ªåŠ¨æ›´æ–°çš„å®æ—¶æ•°æ®</p>
            
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="æœç´¢ï¼šSTM32, ESP32, CH340, LM358...">
                <button onclick="search()">ğŸ” æœç´¢</button>
            </div>
            
            <p style="color:#8892b0;">ğŸ’¡ çƒ­é—¨æœç´¢:</p>
            <div class="examples">
                <button class="example-btn" onclick="setQuery('STM32')">STM32</button>
                <button class="example-btn" onclick="setQuery('ESP32')">ESP32</button>
                <button class="example-btn" onclick="setQuery('CH340')">CH340</button>
                <button class="example-btn" onclick="setQuery('LDO')">LDO</button>
                <button class="example-btn" onclick="setQuery('MOSFET')">MOSFET</button>
                <button class="example-btn" onclick="setQuery('è¿æ”¾')">è¿æ”¾</button>
            </div>

            <div id="dataStatus" class="data-status offline">
                ğŸ”„ æ­£åœ¨åŠ è½½å®æ—¶æ•°æ®...
            </div>

            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p style="color:#8892b0;">ğŸ”„ æœç´¢ä¸­...</p>
            </div>
            <div id="results"></div>
        </div>

        <div class="card">
            <h2 style="margin-bottom:25px">âœ¨ æ ¸å¿ƒåŠŸèƒ½</h2>
            <div class="features">
                <div class="feature"><div class="feature-icon">ğŸ”—</div><h3>å®æ—¶æ•°æ®</h3><p>GitHub Actions<br>æ¯6å°æ—¶è‡ªåŠ¨æ›´æ–°<br>LCSC æ•°æ®æº</p></div>
                <div class="feature"><div class="feature-icon">ğŸ¤–</div><h3>AI æ™ºèƒ½</h3><p>è‡ªç„¶è¯­è¨€æœç´¢<br>æ™ºèƒ½åŒ¹é…æ¨è<br>è§„æ ¼å¯¹æ¯”</p></div>
                <div class="feature"><div class="feature-icon">ğŸ‡¨ğŸ‡³</div><h3>å›½äº§æ›¿ä»£</h3><p>ä¸€é”®æŸ¥æ‰¾<br>æˆæœ¬ä¼˜åŒ–<br>å…¼å®¹æ›¿ä»£</p></div>
                <div class="feature"><div class="feature-icon">ğŸ“¦</div><h3>å®Œæ•´ç”Ÿæ€</h3><p>ç«‹åˆ›å•†åŸ<br>æ•°æ®æ‰‹å†Œ<br>é‡‡è´­é“¾æ¥</p></div>
            </div>
        </div>

        <div class="card" style="text-align:center;padding:40px 30px">
            <h2 style="margin-bottom:20px">ğŸ“¥ æ•°æ®æ¥å£</h2>
            <p style="color:#8892b0;margin-bottom:20px;">å¯ç›´æ¥è°ƒç”¨ JSON API è·å–æ•°æ®</p>
            <a href="https://raw.githubusercontent.com/KINGSTON-115/OpenPartSelector/main/data/parts.json" target="_blank" class="raw-link">
                ğŸ“„ https://raw.githubusercontent.com/.../parts.json
            </a>
            <p style="color:#667788;font-size:12px;margin-top:15px;">
                å“åº”ç¤ºä¾‹: {"meta":{"updated":"2026-02-09T14:30:00Z"},"parts":[...]}
            </p>
        </div>

        <div class="footer">
            <p><strong>OpenPartSelector v0.4</strong> | å¼€æºå…è´¹ | MIT License</p>
            <p style="margin-top:15px">ğŸ“¦ GitHub: <a href="https://github.com/KINGSTON-115/OpenPartSelector" style="color:#00d2ff;">KINGSTON-115/OpenPartSelector</a></p>
        </div>
    </div>

    <script>
    // GitHub RAW æ•°æ®æº
    const DATA_URL = 'https://raw.githubusercontent.com/KINGSTON-115/OpenPartSelector/main/data/parts.json';
    
    let allParts = null;
    let lastUpdate = null;

    // åŠ è½½å®æ—¶æ•°æ®
    async function loadData(){
        const statusEl = document.getElementById('dataStatus');
        const sourceEl = document.getElementById('dataSource');
        
        try {
            console.log('ğŸ“¡ æ­£åœ¨åŠ è½½å®æ—¶æ•°æ®...');
            const response = await fetch(DATA_URL);
            
            if(!response.ok) throw new Error('ç½‘ç»œè¯·æ±‚å¤±è´¥');
            
            const data = await response.json();
            allParts = data.parts || [];
            lastUpdate = data.meta?.updated || null;
            
            // æ›´æ–°çŠ¶æ€
            statusEl.className = 'data-status online';
            statusEl.innerHTML = `âœ… æ•°æ®å·²åŠ è½½ | æ›´æ–°æ—¶é—´: ${new Date(lastUpdate).toLocaleString('zh-CN')}`;
            sourceEl.textContent = `ğŸ“¦ ${data.meta?.source || 'GitHub RAW'} | ${allParts.length} ä¸ªå™¨ä»¶`;
            
            console.log(`âœ… æˆåŠŸåŠ è½½ ${allParts.length} ä¸ªå™¨ä»¶æ•°æ®`);
            
        } catch(e) {
            console.error('âŒ æ•°æ®åŠ è½½å¤±è´¥:', e);
            statusEl.className = 'data-status offline';
            statusEl.innerHTML = `âŒ æ•°æ®åŠ è½½å¤±è´¥ | ${e.message}<br><small>ç‚¹å‡» <a href="${DATA_URL}" target="_blank" style="color:#ffc107;">è¿™é‡Œ</a> æŸ¥çœ‹åŸå§‹æ•°æ®</small>`;
            sourceEl.textContent = 'âŒ ç¦»çº¿æ¨¡å¼';
        }
    }

    function setQuery(text){document.getElementById('searchInput').value=text;search()}

    function search(){
        const q=document.getElementById('searchInput').value.trim().toLowerCase();
        if(!q)return alert('è¯·è¾“å…¥æœç´¢å†…å®¹');
        
        const l=document.getElementById('loading'),r=document.getElementById('results');
        l.classList.add('show');r.innerHTML='';
        
        setTimeout(()=>{
            let results = [];
            
            if(allParts && allParts.length > 0) {
                // ä½¿ç”¨å®æ—¶æ•°æ®æœç´¢
                results = allParts.filter(p => {
                    const text = (p.part + ' ' + p.name + ' ' + p.description || '').toLowerCase();
                    return text.includes(q) || q.includes(p.part?.toLowerCase() || '');
                });
            }
            
            // å¦‚æœæ²¡æœ‰å®æ—¶æ•°æ®æˆ–æ²¡åŒ¹é…ï¼Œä½¿ç”¨æ¼”ç¤ºæ•°æ®
            if(results.length === 0) {
                results = getDemoResults(q);
            }
            
            // æ¸²æŸ“ç»“æœ
            let html = `<h3 style="margin:25px 0 15px;color:#8892b0;">
                ğŸ“¦ æ‰¾åˆ° ${results.length} ä¸ªç»“æœ
                ${lastUpdate ? `<span style="font-size:12px;opacity:0.7;">(æ•°æ®æ¥æº: GitHub RAW)</span>` : ''}
            </h3>`;
            
            results.forEach((x,i)=>{
                const score = x.score || 85;
                const scoreClass = score>=90?'success':score>=70?'warning':'danger';
                html += `<div class="result">
                    <h3>ğŸ“¦ ${i+1}. ${x.part}</h3>
                    <p>${x.mfr || x.manufacturer || 'Unknown'} | ${x.desc || x.description || x.name || ''}</p>
                    <div class="tags">
                        <span class="tag price">ğŸ’° ${x.price || 'Â¥?.??'}</span>
                        <span class="tag">ğŸ“¦ ${x.stock || 'æŸ¥è¯¢ä¸­'}</span>
                        <span class="tag ${scoreClass}">ğŸ¯ ${score}%</span>
                        ${x.link?`<a href="${x.link}" target="_blank" class="tag" style="background:rgba(0,123,255,0.2);">ğŸ”— LCSC</a>`:''}
                    </div>
                </div>`;
            });
            
            r.innerHTML = html;
            l.classList.remove('show');
        },800);
    }

    // æ¼”ç¤ºæ•°æ®ï¼ˆç¦»çº¿å¤‡ç”¨ï¼‰
    function getDemoResults(query){
        const q = query.toLowerCase();
        
        const demoDB = {
            'stm32': [
                {part:'STM32F103C8T6',mfr:'STMicroelectronics',desc:'ARM Cortex-M3 64KB Flash',price:'Â¥0.95',stock:'15,000+',score:92,link:'https://lcsc.com/product-detail/STM32F103C8T6'},
                {part:'GD32F103C8T6',mfr:'GigaDevice',desc:'å›½äº§æ›¿ä»£ 100%å…¼å®¹',price:'Â¥0.85',stock:'30,000+',score:95,link:'https://lcsc.com/product-detail/GD32F103C8T6'}
            ],
            'esp32': [
                {part:'ESP32-WROOM-32E',mfr:'Espressif',desc:'WiFi+BT 8MB Flash',price:'$2.82',stock:'50,000+',score:95,link:'https://lcsc.com/product-detail/ESP32-WROOM-32E'},
                {part:'ESP32-C3FH4',mfr:'Espressif',desc:'RISC-V WiFi+BT',price:'$0.95',stock:'85,000+',score:92,link:'https://lcsc.com/product-detail/ESP32-C3FH4'}
            ],
            'ch340': [
                {part:'CH340N',mfr:'WCH',desc:'USBè½¬UART æ— éœ€æ™¶æŒ¯',price:'Â¥0.15',stock:'85,000+',score:98,link:'https://lcsc.com/product-detail/CH340N'},
                {part:'CH340G',mfr:'WCH',desc:'USBè½¬UART SOP-16',price:'Â¥0.18',stock:'52,000+',score:95,link:'https://lcsc.com/product-detail/CH340G'}
            ],
            'ldo': [
                {part:'LD1117V33',mfr:'STMicroelectronics',desc:'LDO 3.3V 1A SOT-223',price:'Â¥0.15',stock:'365,000+',score:95,link:'https://lcsc.com/product-detail/LD1117V33'},
                {part:'AMS1117-3.3',mfr:'Advanced Monolithic',desc:'LDO 3.3V 1A SOT-223',price:'Â¥0.08',stock:'750,000+',score:90,link:'https://lcsc.com/product-detail/AMS1117-3-3'}
            ],
            'mosfet': [
                {part:'AO3400',mfr:'AOS',desc:'P-Channel -30V -4A',price:'Â¥0.03',stock:'3,500,000+',score:98,link:'https://lcsc.com/product-detail/AO3400'},
                {part:'2N7000',mfr:'ON Semiconductor',desc:'N-Channel 60V 200mA',price:'Â¥0.02',stock:'4,000,000+',score:92,link:'https://lcsc.com/product-detail/2N7000'}
            ],
            'è¿æ”¾': [
                {part:'LM358',mfr:'TI',desc:'åŒè¿ç®—æ”¾å¤§å™¨ ä½åŠŸè€—',price:'Â¥0.06',stock:'200,000+',score:95,link:'https://lcsc.com/product-detail/LM358'},
                {part:'SGM358',mfr:'SGMICRO',desc:'å›½äº§åŒè¿æ”¾',price:'Â¥0.05',stock:'150,000+',score:92,link:'https://lcsc.com/product-detail/SGM358'}
            ]
        };
        
        for(const key in demoDB){
            if(q.includes(key) || key.includes(q)){
                return demoDB[key];
            }
        }
        
        return [
            {part:query.toUpperCase(),mfr:'æœç´¢ç»“æœ',desc:'è¯·æŸ¥çœ‹LCSCè·å–å®æ—¶æ•°æ®',price:'Â¥?.??',stock:'å®æ—¶æŸ¥è¯¢',score:75,link:`https://lcsc.com/search?q=${encodeURIComponent(query)}`}
        ];
    }

    // åˆå§‹åŒ–
    loadData();
    document.getElementById('searchInput').addEventListener('keypress',e=>{if(e.key==='Enter')search()});
    </script>
</body>
</html>
