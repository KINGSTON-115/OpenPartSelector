<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”Œ OpenPartSelector - ç”µå­å…ƒå™¨ä»¶é€‰å‹ç¥å™¨</title>
    <meta name="description" content="ä¸“ä¸ºç”µå­ç±»ä¸“ä¸šå¤§å­¦ç”Ÿæ‰“é€ çš„å…ƒå™¨ä»¶é€‰å‹å·¥å…·ï¼Œå…è´¹å¼€æº">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{
            font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"PingFang SC","Microsoft YaHei",sans-serif;
            background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
            min-height:100vh;
            color:#2d3748;
            overflow-x:hidden;
        }
        .container{max-width:1200px;margin:0 auto;padding:20px}
        
        /* å¤´éƒ¨ */
        .hero{
            text-align:center;
            padding:60px 20px;
            background:linear-gradient(135deg,#1a1a2e 0%,#16213e 100%);
            border-radius:0 0 50px 50px;
            margin-bottom:40px;
            box-shadow:0 20px 60px rgba(0,0,0,0.3);
        }
        .hero-logo{font-size:80px;margin-bottom:20px;animation:bounce 2s infinite}
        @keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
        .hero h1{
            font-size:3em;
            background:linear-gradient(90deg,#00d2ff,#3a7bd5);
            -webkit-background-clip:text;
            -webkit-text-fill-color:transparent;
            margin-bottom:15px;
            animation:fadeInUp 1s ease
        }
        @keyframes fadeInUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
        .hero p{color:#a0aec0;font-size:1.3em;margin-bottom:25px;animation:fadeInUp 1s ease 0.2s both}
        .hero-tags{display:flex;flex-wrap:wrap;justify:center;gap:12px;animation:fadeInUp 1s ease 0.4s both}
        .hero-tag{
            padding:8px 20px;
            background:rgba(255,255,255,0.1);
            border-radius:25px;
            color:#fff;
            font-size:14px;
            backdrop-filter:blur(10px)
        }
        
        /* å¡ç‰‡ */
        .card{
            background:#fff;
            border-radius:20px;
            padding:35px;
            margin:25px 0;
            box-shadow:0 10px 40px rgba(0,0,0,0.1);
            transition:all 0.4s cubic-bezier(0.4,0,0.2,1);
            opacity:0;
            transform:translateY(30px);
        }
        .card.visible{opacity:1;transform:translateY(0)}
        .card:hover{
            transform:translateY(-8px);
            box-shadow:0 25px 80px rgba(0,0,0,0.15);
        }
        .card h2{
            font-size:1.8em;
            color:#1a202c;
            margin-bottom:20px;
            display:flex;
            align-items:center;
            gap:12px
        }
        
        /* æœç´¢æ¡† */
        .search-wrapper{
            background:linear-gradient(135deg,rgba(102,126,234,0.9) 0%,rgba(118,75,162,0.9) 100%);
            border-radius:20px;
            padding:30px;
            margin:30px 0;
            box-shadow:0 20px 60px rgba(102,126,234,0.3)
        }
        .search-box{
            display:flex;
            gap:15px;
            background:#fff;
            border-radius:15px;
            padding:10px;
            box-shadow:0 10px 40px rgba(0,0,0,0.2)
        }
        .search-box input{
            flex:1;
            padding:18px 25px;
            font-size:18px;
            border:none;
            outline:none;
            border-radius:10px;
            transition:all 0.3s
        }
        .search-box input:focus{
            box-shadow:0 0 0 4px rgba(102,126,234,0.3)
        }
        .search-box button{
            padding:18px 40px;
            font-size:18px;
            font-weight:bold;
            background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
            color:#fff;
            border:none;
            border-radius:12px;
            cursor:pointer;
            transition:all 0.3s;
            position:relative;
            overflow:hidden
        }
        .search-box button::before{
            content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;
            background:linear-gradient(90deg,transparent,rgba(255,255,255,0.3),transparent);
            transition:left 0.5s
        }
        .search-box button:hover::before{left:100%}
        .search-box button:hover{transform:scale(1.05);box-shadow:0 15px 40px rgba(102,126,234,0.5)}
        
        /* çƒ­é—¨æœç´¢ */
        .hot-tags{display:flex;flex-wrap:wrap;gap:12px;margin-top:20px}
        .hot-tag{
            padding:12px 22px;
            background:rgba(255,255,255,0.2);
            border-radius:25px;
            color:#fff;
            cursor:pointer;
            font-size:15px;
            transition:all 0.3s;
            backdrop-filter:blur(10px)
        }
        .hot-tag:hover{
            background:rgba(255,255,255,0.3);
            transform:scale(1.1) translateY(-3px);
            box-shadow:0 10px 30px rgba(0,0,0,0.2)
        }
        
        /* ç»“æœå¡ç‰‡ */
        .result{
            background:linear-gradient(135deg,#f5f7fa 0%,#e4e8eb 100%);
            border-radius:18px;
            padding:28px;
            margin:18px 0;
            border-left:6px solid #667eea;
            transition:all 0.4s;
            opacity:0;
            transform:translateX(-30px)
        }
        .result.visible{opacity:1;transform:translateX(0)}
        .result:hover{
            transform:translateX(15px) scale(1.02);
            box-shadow:0 15px 50px rgba(102,126,234,0.2)
        }
        .result h3{
            color:#667eea;
            font-size:1.5em;
            margin-bottom:12px
        }
        .result-meta{
            display:flex;
            flex-wrap:wrap;
            gap:10px;
            margin:15px 0
        }
        .meta-tag{
            padding:8px 18px;
            background:#fff;
            border-radius:20px;
            font-size:14px;
            color:#4a5568;
            transition:all 0.3s;
            cursor:pointer;
        }
        .meta-tag:hover{transform:scale(1.05)}
        .meta-tag.price{
            background:linear-gradient(135deg,#48bb78 0%,#38a169 100%);
            color:#fff;
            font-weight:bold;
        }
        .meta-tag.stock{
            background:linear-gradient(135deg,#4299e1 0%,#3182ce 100%);
            color:#fff;
        }
        .meta-tag.fav{
            background:linear-gradient(135deg,#ed8936 0%,#dd6b20 100%);
            color:#fff;
        }
        
        /* åŠŸèƒ½ç½‘æ ¼ */
        .features{
            display:grid;
            grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
            gap:25px;
            margin:40px 0
        }
        .feature{
            text-align:center;
            padding:40px 30px;
            background:linear-gradient(135deg,#f5f7fa 0%,#e4e8eb 100%);
            border-radius:20px;
            transition:all 0.4s;
            position:relative;
            overflow:hidden
        }
        .feature::before{
            content:'';position:absolute;top:0;left:0;right:0;height:5px;
            background:linear-gradient(90deg,#667eea,#764ba2);
            transform:scaleX(0);
            transition:transform 0.4s
        }
        .feature:hover::before{transform:scaleX(1)}
        .feature:hover{
            transform:translateY(-10px);
            background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
        }
        .feature:hover .feature-icon{transform:scale(1.2) rotate(5deg)}
        .feature-icon{font-size:60px;margin-bottom:20px;transition:all 0.4s}
        .feature h3{font-size:1.4em;margin:15px 0;color:#2d3748}
        .feature:hover h3{color:#fff}
        .feature p{color:#718096;font-size:15px;line-height:1.6}
        .feature:hover p{color:rgba(255,255,255,0.9)}
        
        /* ä¸‹è½½åŒºåŸŸ */
        .download-section{
            background:linear-gradient(135deg,#1a1a2e 0%,#16213e 100%);
            border-radius:25px;
            padding:50px;
            text-align:center;
            margin:40px 0;
        }
        .download-section h2{color:#fff;font-size:2.2em;margin-bottom:15px}
        .download-section p{color:#a0aec0;font-size:1.2em;margin-bottom:35px}
        .download-buttons{display:flex;flex-wrap:wrap;justify:center;gap:20px}
        .download-btn{
            display:inline-flex;
            align-items:center;
            gap:12px;
            padding:20px 45px;
            background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
            color:#fff;
            text-decoration:none;
            border-radius:30px;
            font-size:18px;
            font-weight:bold;
            transition:all 0.4s;
            position:relative;
            overflow:hidden
        }
        .download-btn:hover{
            transform:scale(1.1) translateY(-5px);
            box-shadow:0 20px 60px rgba(102,126,234,0.5);
        }
        .download-btn.secondary{
            background:rgba(255,255,255,0.1);
            border:2px solid rgba(255,255,255,0.3);
        }
        .download-btn.secondary:hover{background:rgba(255,255,255,0.2)}
        
        /* å•†åŸé“¾æ¥ */
        .shops{display:flex;flex-wrap:wrap;justify:center;gap:20px;margin-top:30px}
        .shop-link{
            display:flex;
            align-items:center;
            gap:10px;
            padding:15px 30px;
            background:rgba(255,255,255,0.1);
            border-radius:15px;
            color:#fff;
            text-decoration:none;
            font-size:16px;
            transition:all 0.3s;
        }
        .shop-link:hover{background:rgba(255,255,255,0.2);transform:translateY(-3px)}
        
        /* çŠ¶æ€æŒ‡ç¤º */
        .status-bar{
            display:flex;
            justify-content:center;
            gap:30px;
            padding:20px;
            background:rgba(0,0,0,0.2);
            border-radius:15px;
            margin:25px 0;
            flex-wrap:wrap
        }
        .status-item{
            display:flex;
            align-items:center;
            gap:10px;
            color:#a0aec0;
        }
        .status-dot{
            width:12px;
            height:12px;
            background:#48bb78;
            border-radius:50%;
            animation:pulse 2s infinite
        }
        @keyframes pulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:0.7;transform:scale(1.2)}}
        
        /* Toast æç¤º */
        .toast{
            position:fixed;
            top:30px;
            left:50%;
            transform:translateX(-50%) translateY(-100px);
            background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
            color:#fff;
            padding:16px 32px;
            border-radius:30px;
            box-shadow:0 20px 60px rgba(0,0,0,0.3);
            z-index:10000;
            font-size:16px;
            font-weight:500;
            display:flex;
            align-items:center;
            gap:12px;
            transition:all 0.5s cubic-bezier(0.4,0,0.2,1);
            backdrop-filter:blur(10px)
        }
        .toast.show{transform:translateX(-50%) translateY(0)}
        .toast.success{background:linear-gradient(135deg,#48bb78 0%,#38a169 100%)}
        .toast.error{background:linear-gradient(135deg,#f56565 0%,#e53e3e 100%)}
        
        /* åŠ è½½åŠ¨ç”» */
        .loading{text-align:center;padding:50px;display:none}
        .loading.show{display:block}
        .spinner{
            width:60px;
            height:60px;
            border:6px solid rgba(255,255,255,0.1);
            border-top-color:#667eea;
            border-radius:50%;
            animation:spin 1s linear infinite;
            margin:0 auto 20px
        }
        @keyframes spin{to{transform:rotate(360deg)}}
        
        /* æ·±è‰²æ¨¡å¼åˆ‡æ¢ */
        .dark-toggle{
            position:fixed;
            top:20px;
            right:20px;
            z-index:9999;
            padding:12px 20px;
            background:rgba(255,255,255,0.2);
            border:none;
            border-radius:25px;
            color:#fff;
            cursor:pointer;
            font-size:14px;
            backdrop-filter:blur(10px);
            transition:all 0.3s
        }
        .dark-toggle:hover{background:rgba(255,255,255,0.3);transform:scale(1.05)}
        
        /* æ·±è‰²æ¨¡å¼ */
        body.dark-mode{background:linear-gradient(135deg,#1a1a2e 0%,#16213e 100%) !important;color:#fff !important}
        body.dark-mode .card{background:#1a1a2e !important;border:1px solid rgba(255,255,255,0.1) !important}
        body.dark-mode .card h2{color:#fff !important}
        body.dark-mode .result{background:linear-gradient(135deg,#1a1a2e 0%,#16213e 100%) !important}
        body.dark-mode .feature{background:rgba(255,255,255,0.05) !important}
        body.dark-mode .search-wrapper{background:linear-gradient(135deg,rgba(26,26,46,0.95) 0%,rgba(22,33,62,0.95) 100%) !important}
        body.dark-mode .download-section{background:#1a1a2e !important}
        
        /* å“åº”å¼ */
        @media(max-width:768px){
            .hero h1{font-size:2em}
            .search-box{flex-direction:column}
            .features{grid-template-columns:1fr}
            .hero{border-radius:0 0 30px 30px}
            .status-bar{gap:15px}
            .download-buttons{gap:10px}
            .download-btn{padding:15px 25px;font-size:16px}
        }
    </style>
</head>
<body>
    <!-- Toast å®¹å™¨ -->
    <div id="toast" class="toast"></div>
    
    <!-- å¤´éƒ¨ -->
    <button class="dark-toggle" onclick="toggleDark()">ğŸŒ™ æ·±è‰²</button>
    
    <div class="hero">
        <div class="hero-logo">ğŸ”Œ</div>
        <h1>OpenPartSelector</h1>
        <p>ä¸“ä¸ºç”µå­ç±»ä¸“ä¸šå¤§å­¦ç”Ÿæ‰“é€ çš„å…ƒå™¨ä»¶é€‰å‹ç¥å™¨ ğŸš€</p>
        <div class="hero-tags">
            <span class="hero-tag">ğŸ’° å…è´¹å¼€æº</span>
            <span class="hero-tag">ğŸ“ å­¦ç”Ÿå‹å¥½</span>
            <span class="hero-tag">ğŸ‡¨ğŸ‡³ å›½äº§æ›¿ä»£</span>
            <span class="hero-tag">ğŸ“¦ å®æ—¶æ¯”ä»·</span>
        </div>
    </div>

    <div class="container">
        <!-- æœç´¢å¡ç‰‡ -->
        <div class="card">
            <h2>ğŸ” æ™ºèƒ½é€‰å‹</h2>
            <p style="color:#718096;font-size:1.1em;margin-bottom:20px;">
                è¾“å…¥å™¨ä»¶å‹å·æˆ–éœ€æ±‚ï¼Œå®æ—¶æœç´¢å…¨ç½‘æœ€ä¼˜æ–¹æ¡ˆ
            </p>
            
            <div class="search-wrapper">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="è¾“å…¥å‹å·ï¼šSTM32F103C8T6ã€ESP32ã€CH340...">
                    <button onclick="search()">ğŸ” ç«‹å³æœç´¢</button>
                </div>
                
                <p style="color:#fff;margin:15px 0 10px;font-size:15px;">ğŸ”¥ çƒ­é—¨æœç´¢ï¼š</p>
                <div class="hot-tags">
                    <button class="hot-tag" onclick="setQuery('STM32F103C8T6')">STM32F103</button>
                    <button class="hot-tag" onclick="setQuery('ESP32-WROOM')">ESP32</button>
                    <button class="hot-tag" onclick="setQuery('STC89C51')">STC89C51</button>
                    <button class="hot-tag" onclick="setQuery('CH340N')">CH340N</button>
                    <button class="hot-tag" onclick="setQuery('ATMEGA328P')">ATMEGA328P</button>
                    <button class="hot-tag" onclick="setQuery('NE555')">NE555</button>
                    <button class="hot-tag" onclick="setQuery('RP2040')">RP2040</button>
                    <button class="hot-tag" onclick="setQuery('GD32F103')">GD32å›½äº§</button>
                </div>
            </div>

            <div class="status-bar">
                <div class="status-item">
                    <div class="status-dot"></div>
                    <span>ğŸ”¥ å®æ—¶æœç´¢å·²å°±ç»ª</span>
                </div>
                <div class="status-item">
                    <span>ğŸ“¦ æ”¯æŒ 100+ å™¨ä»¶ç±»å‹</span>
                </div>
                <div class="status-item">
                    <span>ğŸ”— 5+ ä¸»æµå•†åŸ</span>
                </div>
            </div>

            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p style="color:#718096;font-size:1.1em;">ğŸ”„ æ­£åœ¨æœç´¢...</p>
            </div>
            <div id="results"></div>
        </div>

        <!-- æ ¸å¿ƒåŠŸèƒ½ -->
        <div class="card">
            <h2>âœ¨ æ ¸å¿ƒåŠŸèƒ½</h2>
            <div class="features">
                <div class="feature">
                    <div class="feature-icon">ğŸ”</div>
                    <h3>æ™ºèƒ½æœç´¢</h3>
                    <p>è‡ªç„¶è¯­è¨€æœç´¢<br>æ¨¡ç³ŠåŒ¹é…<br>å¿«é€Ÿå®šä½</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">ğŸ’°</div>
                    <h3>å…¨ç½‘æ¯”ä»·</h3>
                    <p>ç«‹åˆ›å•†åŸ<br>æ·˜å®/äº¬ä¸œ<br>æœ€ä½ä»·è´­ä¹°</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">ğŸ‡¨ğŸ‡³</div>
                    <h3>å›½äº§æ›¿ä»£</h3>
                    <p>STâ†’GD32<br>ä¸€é”®æ›¿æ¢<br>é™æœ¬å¢æ•ˆ</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">ğŸ“š</div>
                    <h3>å­¦ä¹ èµ„æº</h3>
                    <p>æ•°æ®æ‰‹å†Œ<br>æ•™ç¨‹é“¾æ¥<br>å¼€æºé¡¹ç›®</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">ğŸ“‹</div>
                    <h3>BOM ç®¡ç†</h3>
                    <p>æ‰¹é‡é€‰å‹<br>æ¸…å•å¯¼å‡º<br>ä¸€ç«™å¼é‡‡è´­</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">âš ï¸</div>
                    <h3>åœäº§é¢„è­¦</h3>
                    <p>EOL æé†’<br>æ›¿ä»£æ¨è<br>ä¾›åº”é“¾å®‰å…¨</p>
                </div>
            </div>
        </div>

        <!-- ä¸‹è½½åŒºåŸŸ -->
        <div class="download-section">
            <h2>ğŸ“¥ è·å–å·¥å…·</h2>
            <p>é€‰æ‹©æœ€é€‚åˆä½ çš„ä½¿ç”¨æ–¹å¼</p>
            <div class="download-buttons">
                <a href="https://github.com/KINGSTON-115/OpenPartSelector/releases" target="_blank" class="download-btn">
                    ğŸªŸ Windows ç‰ˆ
                </a>
                <a href="https://pypi.org/project/OpenPartSelector" target="_blank" class="download-btn">
                    ğŸ“¦ pip å®‰è£…
                </a>
                <a href="https://github.com/KINGSTON-115/OpenPartSelector" target="_blank" class="download-btn secondary">
                    ğŸ’» æºç ä¸‹è½½
                </a>
            </div>
            
            <div class="shops">
                <a href="https://www.lcsc.com" target="_blank" class="shop-link">ğŸª ç«‹åˆ›å•†åŸ</a>
                <a href="https://www.taobao.com" target="_blank" class="shop-link">ğŸ›’ æ·˜å®</a>
                <a href="https://www.jd.com" target="_blank" class="shop-link">ğŸ“¦ äº¬ä¸œ</a>
                <a href="https://www.easyeda.com" target="_blank" class="shop-link">ğŸ¨ ç«‹åˆ›EDA</a>
                <a href="https://www.digikey.com" target="_blank" class="shop-link">ğŸŒ Digi-Key</a>
            </div>
        </div>

        <!-- å­¦ä¹ èµ„æº -->
        <div class="card">
            <h2>ğŸ“š ç”µå­å­¦ä¹ èµ„æº</h2>
            <div class="features">
                <div class="feature">
                    <div class="feature-icon">ğŸ“–</div>
                    <h3>å…¥é—¨æ•™ç¨‹</h3>
                    <p>å•ç‰‡æœºå…¥é—¨<br>EDA è®¾è®¡<br>ç„Šæ¥åŸºç¡€</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">ğŸ”§</div>
                    <h3>å®æˆ˜é¡¹ç›®</h3>
                    <p>å¼€æºé¡¹ç›®<br>ç«èµ›èµ„æ–™<br>æ¯•ä¸šè®¾è®¡</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">ğŸ’¡</div>
                    <h3>ç»éªŒåˆ†äº«</h3>
                    <p>è¸©å‘è®°å½•<br>é€‰å‹æŠ€å·§<br>çœé’±æ”»ç•¥</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">ğŸ“</div>
                    <h3>ç«èµ›æŒ‡å¯¼</h3>
                    <p>ç”µèµ›å‡†å¤‡<br>æ™ºèƒ½è½¦<br>RoboMaster</p>
                </div>
            </div>
        </div>

        <!-- é¡µè„š -->
        <div class="footer">
            <p><strong>OpenPartSelector</strong> | å…è´¹å¼€æº | MIT License</p>
            <p style="margin-top:15px">
                ğŸ“¦ GitHub: <a href="https://github.com/KINGSTON-115/OpenPartSelector">KINGSTON-115/OpenPartSelector</a>
            </p>
            <p style="margin-top:10px;color:#718096;">
                ğŸ“ ä¸“ä¸ºç”µå­ç±»ä¸“ä¸šå¤§å­¦ç”Ÿæ‰“é€  | è®©é€‰å‹æ›´ç®€å•
            </p>
        </div>
    </div>

    <script>
    // Toast æç¤ºå‡½æ•°
    function showToast(msg, type = 'info'){
        const toast = document.getElementById('toast');
        toast.textContent = msg;
        toast.className = 'toast ' + type;
        toast.classList.add('show');
        setTimeout(() => toast.classList.remove('show'), 3000);
    }
    
    // æ·±è‰²æ¨¡å¼
    let isDark = false;
    function toggleDark(){
        isDark = !isDark;
        document.body.classList.toggle('dark-mode');
        document.querySelector('.dark-toggle').innerHTML = isDark ? 'â˜€ï¸ æµ…è‰²' : 'ğŸŒ™ æ·±è‰²';
        localStorage.setItem('darkMode', isDark);
        showToast(isDark ? 'ğŸŒ™ å·²åˆ‡æ¢æ·±è‰²æ¨¡å¼' : 'â˜€ï¸ å·²åˆ‡æ¢æµ…è‰²æ¨¡å¼', 'success');
    }
    if(localStorage.getItem('darkMode') === 'true'){
        isDark = true;
        document.body.classList.add('dark-mode');
        document.querySelector('.dark-toggle').innerHTML = 'â˜€ï¸ æµ…è‰²';
    }
    
    // æœç´¢å†å²
    function saveSearch(query){
        if(!query) return;
        let history = JSON.parse(localStorage.getItem('searchHistory') || '[]');
        history = [query, ...history.filter(h => h !== query)].slice(0, 10);
        localStorage.setItem('searchHistory', JSON.stringify(history));
    }
    
    // æœ¬åœ°æ”¶è—
    function addFav(part, mfr){
        let favs = JSON.parse(localStorage.getItem('favorites') || '[]');
        if(!favs.find(f => f.part === part)){
            favs.push({part, mfr, time: new Date().toLocaleString()});
            localStorage.setItem('favorites', JSON.stringify(favs));
            showToast(`â­ å·²æ”¶è— ${part}`, 'success');
        } else {
            showToast('âš ï¸ å·²æ”¶è—è¿‡æ­¤å™¨ä»¶', 'error');
        }
    }
    
    function removeFav(part){
        let favs = JSON.parse(localStorage.getItem('favorites') || '[]');
        favs = favs.filter(f => f.part !== part);
        localStorage.setItem('favorites', JSON.stringify(favs));
        showFavs();
    }
    
    function showFavs(){
        const favs = JSON.parse(localStorage.getItem('favorites') || '[]');
        const container = document.getElementById('favoritesContainer');
        if(!container) return;
        
        if(favs.length === 0){
            container.innerHTML = '<p style="color:#a0aec0;text-align:center;padding:30px;">ğŸ“­ æš‚æ— æ”¶è—ï¼Œç‚¹å‡»â­æ·»åŠ </p>';
            return;
        }
        
        container.innerHTML = '<div style="display:grid;gap:15px;">' + 
            favs.map(f => `<div style="padding:15px;background:rgba(102,126,234,0.1);border-radius:12px;display:flex;justify-content:space-between;align-items:center;">
                <div><strong style="color:#667eea;">${f.part}</strong><br><small style="color:#718096;">${f.mfr}</small></div>
                <button onclick="removeFav('${f.part}')" style="padding:8px 15px;background:#f56565;border:none;border-radius:8px;color:#fff;cursor:pointer;">åˆ é™¤</button>
            </div>`).join('') + '</div>';
    }
    
    // å¿«æ·é”®
    document.addEventListener('keydown', e => {
        if(e.key === '/' && document.activeElement.tagName !== 'INPUT'){
            e.preventDefault();
            document.getElementById('searchInput').focus();
        }
        if(e.key === 'Escape'){
            document.getElementById('searchInput').blur();
        }
    });

    // å™¨ä»¶æ•°æ®åº“
    const partsDB = {
        'STM32': {mfr: 'STMicroelectronics', category: 'ARM Cortex-M', type: 'MCU', alternatives: ['GD32F103', 'HK32F103'], price: 'Â¥0.95-8.00'},
        'GD32': {mfr: 'å…†æ˜“åˆ›æ–°', category: 'å›½äº§ARM', type: 'MCU', alternatives: ['STM32F103'], price: 'Â¥0.80-2.50'},
        'ESP32': {mfr: 'ä¹é‘«ç§‘æŠ€', category: 'WiFi+BT', type: 'Wireless SoC', alternatives: ['ESP8266'], price: 'Â¥8.00-25.00'},
        'STC89': {mfr: 'å®æ™¶ç§‘æŠ€', category: '8051å•ç‰‡æœº', type: 'MCU', alternatives: ['AT89S52'], price: 'Â¥0.50-1.50'},
        'ATMEGA': {mfr: 'Microchip', category: 'AVRå•ç‰‡æœº', type: 'MCU', alternatives: ['APM32'], price: 'Â¥1.50-8.00'},
        'CH340': {mfr: 'æ²æ’å¾®ç”µå­', category: 'USBè½¬UART', type: 'Interface', alternatives: ['CP2102'], price: 'Â¥0.15-0.30'},
        'NE555': {mfr: 'TI/å›½äº§', category: 'å®šæ—¶å™¨', type: 'Analog', alternatives: ['NE556'], price: 'Â¥0.04-0.15'},
        'RP2040': {mfr: 'Raspberry Pi', category: 'åŒæ ¸M0+', type: 'MCU', alternatives: ['STM32G0'], price: 'Â¥1.80-5.00'},
        'NRF52': {mfr: 'Nordic', category: 'BLE+ARM', type: 'Wireless', alternatives: ['ESP32'], price: 'Â¥2.50-8.00'},
        '74HC': {mfr: 'NXP/å›½äº§', category: 'CMOSé€»è¾‘', type: 'Logic', alternatives: ['74LS'], price: 'Â¥0.05-0.30'}
    };

    function setQuery(text){
        document.getElementById('searchInput').value = text;
        search();
    }

    function search(){
        const q = document.getElementById('searchInput').value.trim();
        if(!q){
            showToast('âš ï¸ è¯·è¾“å…¥æœç´¢å†…å®¹', 'error');
            return;
        }
        
        saveSearch(q);
        const l = document.getElementById('loading');
        const r = document.getElementById('results');
        l.classList.add('show');
        r.innerHTML = '';
        
        setTimeout(() => {
            const results = findParts(q);
            renderResults(results, q);
            l.classList.remove('show');
            showToast(`ğŸ” æ‰¾åˆ° ${results.length} ä¸ªç»“æœ`, 'success');
        }, 500);
    }

    function findParts(query){
        const q = query.toUpperCase();
        let results = [];
        for(const [key, data] of Object.entries(partsDB)){
            if(q.includes(key)){
                results.push({part: q, ...data, links: ['lcsc', 'taobao', 'jd'], score: 100});
            }
        }
        if(results.length === 0){
            results.push({part: q, mfr: 'å¾…ç¡®è®¤', category: 'æœç´¢ç»“æœ', type: 'è¯·é€‰æ‹©', alternatives: [], price: 'å®æ—¶æŸ¥è¯¢', links: ['lcsc', 'taobao'], score: 70});
        }
        return results;
    }

    function renderResults(results, query){
        const r = document.getElementById('results');
        let html = `<h3 style="margin:25px 0 15px;color:#667eea;font-size:1.3em;">ğŸ“¦ æ‰¾åˆ° ${results.length} ä¸ªæ¨èç»“æœ</h3>`;
        
        results.forEach((item, i) => {
            const linksHtml = ['lcsc','taobao','jd','digikey'].map(link => {
                const names = {lcsc: 'ğŸª ç«‹åˆ›', taobao: 'ğŸ›’ æ·˜å®', jd: 'ğŸ“¦ äº¬ä¸œ', digikey: 'ğŸŒ Digi-Key'};
                const urls = {lcsc:`https://www.lcsc.com/search?q=${item.part}`, taobao:`https://s.taobao.com/search?q=${item.part}`, jd:`https://search.jd.com/Search?keyword=${item.part}`, digikey:`https://www.digikey.com/en/search?q=${item.part}`};
                return `<a href="${urls[link]}" target="_blank" class="meta-tag">${names[link]}</a>`;
            }).join('');
            
            const altHtml = item.alternatives?.length ? `<span class="meta-tag" style="background:#48bb78;color:#fff;">ğŸ‡¨ğŸ‡³ æ›¿ä»£: ${item.alternatives.join(', ')}</span>` : '';
            
            html += `<div class="result"><h3>ğŸ“¦ ${i+1}. ${item.part}</h3>
                <p style="font-size:1.1em;color:#4a5568;">${item.mfr} | ${item.category}</p>
                <div class="result-meta">
                    <span class="meta-tag price">ğŸ’° ${item.price}</span>
                    <span class="meta-tag stock">ğŸ“¦ ${item.type}</span>
                    ${altHtml}
                    <span class="meta-tag fav" onclick="addFav('${item.part}','${item.mfr}')">â­ æ”¶è—</span>
                    ${linksHtml}
                </div></div>`;
        });
        r.innerHTML = html;
        // åŠ¨ç”»
        setTimeout(() => {
            document.querySelectorAll('.result').forEach((el, i) => {
                setTimeout(() => el.classList.add('visible'), i * 100);
            });
        }, 100);
    }

    document.getElementById('searchInput').addEventListener('keypress', e => {
        if(e.key === 'Enter') search();
    });
    
    // é¡µé¢æ»šåŠ¨åŠ¨ç”»
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if(entry.isIntersecting) entry.target.classList.add('visible');
        });
    }, {threshold: 0.1});
    document.querySelectorAll('.card').forEach(card => observer.observe(card));
    
    // ä½¿ç”¨ç»Ÿè®¡
    function trackUsage(){
        const date = new Date().toDateString();
        let stats = JSON.parse(localStorage.getItem('usageStats') || '{}');
        stats[date] = (stats[date] || 0) + 1;
        localStorage.setItem('usageStats', JSON.stringify(stats));
    }
    trackUsage();
    
    // æ˜¾ç¤ºä½¿ç”¨ç»Ÿè®¡
    function showStats(){
        const stats = JSON.parse(localStorage.getItem('usageStats') || '{}');
        const days = Object.keys(stats).length;
        const total = Object.values(stats).reduce((a,b)=>a+b,0);
        showToast(`ğŸ“Š å·²ä½¿ç”¨ ${days} å¤©ï¼Œæœç´¢ ${total} æ¬¡`, 'success');
    }
    
    // åˆå§‹åŒ–æ”¶è—æ˜¾ç¤º
    if(document.getElementById('favoritesContainer')) showFavs();
    </script>
</body>
</html>
